"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6868],{1473:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"data-modeling/index","title":"Data Modeling with Cube","description":"Data modeling is the foundation of any analytics application. In Cube, you define measures (what you want to calculate) and dimensions (how you want to group and filter) to create a semantic layer over your raw data.  The logic is organized into cubes which represent logical datasets, generally mapping one-to-one with tables in a star schema.","source":"@site/docs/data-modeling/index.md","sourceDirName":"data-modeling","slug":"/data-modeling/","permalink":"/cube-workshop/docs/data-modeling/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"workshopSidebar","previous":{"title":"Workshop Setup","permalink":"/cube-workshop/docs/setup"},"next":{"title":"Access Control with Cube","permalink":"/cube-workshop/docs/access-control/"}}');var r=s(4848),t=s(8453);const l={sidebar_position:1},o="Data Modeling with Cube",a={},d=[{value:"Why Data Modeling Matters",id:"why-data-modeling-matters",level:2},{value:"The TPC-H Schema",id:"the-tpc-h-schema",level:2},{value:"Visualizing the TPC-H Schema in Cube",id:"visualizing-the-tpc-h-schema-in-cube",level:2},{value:"Your First Query",id:"your-first-query",level:2},{value:"Core Concepts",id:"core-concepts",level:2},{value:"What We Skipped: Starting From Scratch",id:"what-we-skipped-starting-from-scratch",level:3},{value:"Cubes (Data Models)",id:"cubes-data-models",level:3},{value:"Measures",id:"measures",level:3},{value:"Dimensions",id:"dimensions",level:3},{value:"Development Mode vs Production",id:"development-mode-vs-production",level:2},{value:"Understanding the Cube Development Workflow",id:"understanding-the-cube-development-workflow",level:3},{value:"Entering Development Mode",id:"entering-development-mode",level:3},{value:"What Development Mode Enables",id:"what-development-mode-enables",level:3},{value:"Development API Endpoint",id:"development-api-endpoint",level:3},{value:"Making Changes Safely",id:"making-changes-safely",level:3},{value:"Committing and Deploying to Production",id:"committing-and-deploying-to-production",level:3},{value:"Why This Workflow Matters",id:"why-this-workflow-matters",level:3},{value:"Your First Data Model",id:"your-first-data-model",level:2},{value:"Exercise: Add Revenue Metrics",id:"exercise-add-revenue-metrics",level:3},{value:"Test Your Model in the Playground",id:"test-your-model-in-the-playground",level:3},{value:"The Power of Reusability",id:"the-power-of-reusability",level:3},{value:"Joins and Relationships",id:"joins-and-relationships",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Cube Parameters",id:"common-cube-parameters",level:2},{value:"Visibility Control",id:"visibility-control",level:3},{value:"Metadata for Discovery",id:"metadata-for-discovery",level:3},{value:"SQL Flexibility",id:"sql-flexibility",level:3},{value:"Refresh Keys for Cache Invalidation",id:"refresh-keys-for-cache-invalidation",level:3},{value:"Data Source Routing",id:"data-source-routing",level:3},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Complete the Missing Join",id:"exercise-1-complete-the-missing-join",level:3},{value:"Exercise 2: Add Subquery Dimensions",id:"exercise-2-add-subquery-dimensions",level:3},{value:"Exercise 3: Business Logic with Binning",id:"exercise-3-business-logic-with-binning",level:3},{value:"Exercise 4: Multi-Level Measure Dependencies",id:"exercise-4-multi-level-measure-dependencies",level:3},{value:"Understanding Relationships &amp; Fan-Outs",id:"understanding-relationships--fan-outs",level:2},{value:"Why Relationship Direction Matters",id:"why-relationship-direction-matters",level:3},{value:"Fan-Out Prevention",id:"fan-out-prevention",level:3},{value:"The Power of Extends",id:"the-power-of-extends",level:2},{value:"Why Our Model Uses Extends",id:"why-our-model-uses-extends",level:3},{value:"Date Tables: A Common Use Case for Extends",id:"date-tables-a-common-use-case-for-extends",level:3},{value:"Custom Extensions",id:"custom-extensions",level:3},{value:"Creating a Sales View",id:"creating-a-sales-view",level:2},{value:"What This Enables",id:"what-this-enables",level:2},{value:"Key Business Metrics in the View",id:"key-business-metrics-in-the-view",level:2},{value:"Line Item Measures",id:"line-item-measures",level:3},{value:"Order Measures",id:"order-measures",level:3},{value:"View Design Principles",id:"view-design-principles",level:2},{value:"Correct Granularity",id:"correct-granularity",level:3},{value:"Join Path Strategy",id:"join-path-strategy",level:3},{value:"Field Control Best Practices",id:"field-control-best-practices",level:3},{value:"Benefits for End Users",id:"benefits-for-end-users",level:3},{value:"Complete Model Files",id:"complete-model-files",level:2},{value:"\ud83d\udcc1 Starter Files",id:"-starter-files",level:3},{value:"\ud83d\udcc1 Data Modeling Complete",id:"-data-modeling-complete",level:3},{value:"Deploying Your Sales View to Production",id:"deploying-your-sales-view-to-production",level:2},{value:"Final Exercise: Commit your Changes",id:"final-exercise-commit-your-changes",level:3},{value:"What You&#39;ve Accomplished",id:"what-youve-accomplished",level:3},{value:"Business-Friendly Data Model",id:"business-friendly-data-model",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"data-modeling-with-cube",children:"Data Modeling with Cube"})}),"\n",(0,r.jsxs)(n.p,{children:["Data modeling is the foundation of any analytics application. In Cube, you define ",(0,r.jsx)(n.strong,{children:"measures"})," (what you want to calculate) and ",(0,r.jsx)(n.strong,{children:"dimensions"})," (how you want to group and filter) to create a semantic layer over your raw data.  The logic is organized into ",(0,r.jsx)(n.strong,{children:"cubes"})," which represent logical datasets, generally mapping one-to-one with tables in a star schema."]}),"\n",(0,r.jsx)(n.h2,{id:"why-data-modeling-matters",children:"Why Data Modeling Matters"}),"\n",(0,r.jsx)(n.p,{children:"Instead of writing SQL queries directly against your database, Cube's data modeling approach provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reusable metrics"})," - Model once, deliver anywhere"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent definitions"}),' - No more "which revenue number is correct?"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Business logic encapsulation"})," - Complex calculations and join logic in one place"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Software development best practices"})," - Version control (git integration), testing, and collaboration"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-tpc-h-schema",children:"The TPC-H Schema"}),"\n",(0,r.jsx)(n.p,{children:"Our workshop uses the standard TPC-H schema representing a B2B e-commerce business:"}),"\n",(0,r.jsx)(n.mermaid,{value:"erDiagram\n    CUSTOMER ||--o{ ORDERS : places\n    ORDERS ||--o{ LINEITEM : contains\n    PART ||--o{ LINEITEM : ordered\n    PART ||--o{ PARTSUPP : supplied_by\n    SUPPLIER ||--o{ PARTSUPP : supplies\n    SUPPLIER ||--o{ LINEITEM : ships\n    NATION ||--o{ CUSTOMER : located_in\n    NATION ||--o{ SUPPLIER : located_in\n    REGION ||--o{ NATION : contains"}),"\n",(0,r.jsx)(n.h2,{id:"visualizing-the-tpc-h-schema-in-cube",children:"Visualizing the TPC-H Schema in Cube"}),"\n",(0,r.jsx)(n.p,{children:"Here's how it looks in Cube's visual modeler:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"TPC-H schema in Cube visual modeler",src:s(7201).A+"",width:"3006",height:"1706"})}),"\n",(0,r.jsx)(n.h2,{id:"your-first-query",children:"Your First Query"}),"\n",(0,r.jsx)(n.p,{children:"Let's start with a query to see how Cube works. In your Cube Cloud workspace:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Navigate to the Playground"})," (left sidebar)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Expand"})," the ",(0,r.jsx)(n.code,{children:"orders"})," cube"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add a measure"}),": Click the field ",(0,r.jsx)(n.code,{children:"count"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add a dimension"}),": Click the ",(0,r.jsx)(n.code,{children:"order_date"})," field, select ",(0,r.jsx)(n.code,{children:"year"})," as the granularity"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:'Click "Run Query"'})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Screenshot: Playground query results showing order count by year",src:s(5868).A+"",width:"2994",height:"1720"})}),"\n",(0,r.jsxs)(n.p,{children:["You should see a time series of order counts.  Check out the tabs for ",(0,r.jsx)(n.strong,{children:"SQL API"}),", ",(0,r.jsx)(n.strong,{children:"REST API"}),", and ",(0,r.jsx)(n.strong,{children:"GraphQL API"})," (middle of the screen) - these show how to issue this query to those APIs respectively.  Simple syntax, right?"]}),"\n",(0,r.jsxs)(n.p,{children:["Now click on the ",(0,r.jsx)(n.strong,{children:"Generated SQL"})," tab - this is the query that Cube generates which goes back to our PostgreSQL database."]}),"\n",(0,r.jsxs)(n.p,{children:["Let's ",(0,r.jsx)(n.strong,{children:"add another field to the query"}),".  From the ",(0,r.jsx)(n.code,{children:"regions"})," cube, click the ",(0,r.jsx)(n.code,{children:"name"}),' field.  Now check those API tabs again.  The "Semantic SQL" (what we see on the ',(0,r.jsx)(n.strong,{children:"SQL API"})," tab) is simple - you're just asking for fields without worrying about the join logic which we've already defined and is now part of the data model."]}),"\n",(0,r.jsxs)(n.p,{children:["On the ",(0,r.jsx)(n.strong,{children:"Generated SQL"})," tab, the query is now much more complex as the joins traverse a few tables to go from ",(0,r.jsx)(n.code,{children:"orders"})," -> ",(0,r.jsx)(n.code,{children:"customers"})," -> ",(0,r.jsx)(n.code,{children:"nations"})," -> ",(0,r.jsx)(n.code,{children:"regions"})," but as a semantic layer end user, we are able to simply re-use the logic that was already setup ahead of time."]}),"\n",(0,r.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"what-we-skipped-starting-from-scratch",children:"What We Skipped: Starting From Scratch"}),"\n",(0,r.jsx)(n.p,{children:"In this workshop, we started with an existing data model to save time. When building a Cube project from scratch, you'd typically:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use the Connection Wizard"})," - Cube guides you through connecting to your database"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Select Tables"})," - Choose which tables to model from your database schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generate Initial Cubes"})," - Cube automatically creates a cube for each selected table with:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Basic dimensions for each column"}),"\n",(0,r.jsxs)(n.li,{children:["A ",(0,r.jsx)(n.code,{children:"count"})," measure"]}),"\n",(0,r.jsx)(n.li,{children:"Detected data types (string, number, time)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Infer Relationships"})," - Cube analyzes foreign keys and suggests join relationships"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Refine and Customize"})," - Add business logic, custom measures, and meaningful descriptions"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This automated process gives you a solid foundation that you can then enhance with business-specific logic - exactly where we started in this workshop!"}),"\n",(0,r.jsx)(n.h3,{id:"cubes-data-models",children:"Cubes (Data Models)"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.strong,{children:"Cube"})," represents a table or logical dataset. Cubes typically map 1-to-1 with tables in a star schema, but are also flexible.  For TPCH:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"orders"})," - Purchase orders from customers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"customers"})," - B2B companies buying parts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"line_items"})," - Individual products within orders"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"parts"})," - Industrial components catalog"]}),"\n",(0,r.jsx)(n.li,{children:"etc."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"measures",children:"Measures"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Measures"}),' are aggregated values - the "what you want to calculate".  They can be simple counts or complex calculations. You can reference other measures in their definitions, allowing for powerful reusability and composability.']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'measures:\n  - name: count\n    type: count\n  \n  - name: total_revenue\n    sql: extended_price\n    type: sum\n    format: currency\n  \n  - name: average_order_value\n    sql: "{CUBE.total_revenue} / {CUBE.count}"\n    type: number\n    format: currency\n'})}),"\n",(0,r.jsx)(n.h3,{id:"dimensions",children:"Dimensions"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Dimensions"}),' are attributes for grouping and filtering - the "how you want to group/filter the measures". They can be simple fields or complex derived values.:']}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"dimensions:\n  - name: order_date\n    sql: o_orderdate::DATE\n    type: time\n  \n  - name: customer_segment\n    sql: c_mktsegment\n    type: string\n  \n  - name: order_size_bins\n    sql: >\n      CASE \n        WHEN {CUBE}.o_totalprice < 50000 THEN 'Small Orders'\n        WHEN {CUBE}.o_totalprice < 150000 THEN 'Medium Orders'\n        WHEN {CUBE}.o_totalprice < 300000 THEN 'Large Orders'\n        ELSE 'Enterprise Orders'\n      END\n    type: string\n    description: \"Order value categories for business analysis\"\n"})}),"\n",(0,r.jsx)(n.h2,{id:"development-mode-vs-production",children:"Development Mode vs Production"}),"\n",(0,r.jsx)(n.p,{children:"Before making any changes to your data model, it's important to understand Cube's development workflow. This ensures you can safely experiment and test changes without affecting your production deployment."}),"\n",(0,r.jsx)(n.h3,{id:"understanding-the-cube-development-workflow",children:"Understanding the Cube Development Workflow"}),"\n",(0,r.jsx)(n.p,{children:"Cube Cloud provides two distinct environments:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Production Environment"}),": The live, deployed version of your data model that serves real users and applications"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Development Environment"}),": An isolated workspace where you can make and test changes safely"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"entering-development-mode",children:"Entering Development Mode"}),"\n",(0,r.jsxs)(n.p,{children:["Before modifying any data model files, you need to enter ",(0,r.jsx)(n.strong,{children:"Development Mode"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Navigate to the Data Model page"})," in your Cube workspace"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'Click the "Dev Mode" button'})," (top of the interface)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Choose your branch strategy"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create a new branch"})," - Recommended for new features (",(0,r.jsx)(n.code,{children:"feature/sales-view"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use existing branch"})," - If continuing previous work"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Entering Development Mode",src:s(3903).A+"",width:"3678",height:"1214"})}),"\n",(0,r.jsx)(n.h3,{id:"what-development-mode-enables",children:"What Development Mode Enables"}),"\n",(0,r.jsx)(n.p,{children:"Once in development mode, you get:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udd12 Isolated Environment"}),": Changes don't affect production users"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udd04 Hot Reload"}),": The development API automatically reflects your changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83c\udf3f Git Integration"}),": All committed changes are tracked on your development branch"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83e\uddea Safe Testing"}),": Test queries and applications against your changes before you even commit"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udc65 Collaboration"}),": Multiple developers can work on different branches"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"development-api-endpoint",children:"Development API Endpoint"}),"\n",(0,r.jsx)(n.p,{children:"In development mode, you'll see a separate API endpoint for testing:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Production API (for live apps)\nhttps://your-workspace.cubecloud.dev/cubejs-api/v1\n\n# Development API (for testing changes)  \nhttps://your-workspace.cubecloud.dev/dev-branch-name/cubejs-api/v1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"making-changes-safely",children:"Making Changes Safely"}),"\n",(0,r.jsx)(n.p,{children:"While in development mode:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Edit your data model files"})," - Add measures, dimensions, cubes, or views"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test in Playground"})," - Queries automatically use your development branch"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validate with applications"})," - Point your app to the development API endpoint"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Iterate quickly"})," - Changes appear within seconds without deployment delays"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Development Best Practices",type:"tip",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Always work in development mode when making changes"}),"\n",(0,r.jsxs)(n.li,{children:["Use descriptive branch names like ",(0,r.jsx)(n.code,{children:"feature/customer-metrics"})," or ",(0,r.jsx)(n.code,{children:"fix/revenue-calculation"})]}),"\n",(0,r.jsx)(n.li,{children:"Test thoroughly before merging to production"}),"\n",(0,r.jsx)(n.li,{children:"Keep development branches focused on specific features or fixes"}),"\n"]})}),"\n",(0,r.jsx)(n.h3,{id:"committing-and-deploying-to-production",children:"Committing and Deploying to Production"}),"\n",(0,r.jsx)(n.p,{children:"After testing your changes and confirming they work correctly:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 1: Commit Your Changes"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["On the Data Model page, ",(0,r.jsx)(n.strong,{children:"Review your changes"})," in the Data Model IDE"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'Click "Commit & Sync"'})," to save your changes to the development branch"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add a commit message"})," describing what you built"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'Click "Commit & Sync"'})," in the modal to proceed."]}),"\n",(0,r.jsx)(n.li,{children:"The data model is now committed on your branch.  If you want to make more changes before merging, you can just continue your development, knowing your progress is saved with git."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Commit button",src:s(4543).A+"",width:"1511",height:"377"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 2: Merge to Production"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Still on the Data Model page, ",(0,r.jsx)(n.strong,{children:"Click the Merge button"})," (same spot as Commit)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Enter a message"})," to describe the changes"]}),"\n",(0,r.jsxs)(n.li,{children:["Unless you have a reason to keep it, check the box for ",(0,r.jsx)(n.strong,{children:"Delete -dev- branch"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Click Merge"})," to proceed"]}),"\n",(0,r.jsxs)(n.li,{children:["You're now back in main looking at your production data model.  To continue development work, click on ",(0,r.jsx)(n.strong,{children:"Dev Mode"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Merge Modal",src:s(3271).A+"",width:"1418",height:"668"})}),"\n",(0,r.jsx)(n.admonition,{title:"Git Integration Required",type:"warning",children:(0,r.jsx)(n.p,{children:"This workshop uses a default (but private) Cube repository for your deployment.  In practice, you would usually connect to your own git repository on GitHub/GitLab/etc."})}),"\n",(0,r.jsx)(n.h3,{id:"why-this-workflow-matters",children:"Why This Workflow Matters"}),"\n",(0,r.jsx)(n.p,{children:"This development-to-production workflow provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udee1\ufe0f Risk Mitigation"}),": Never break production with experimental changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udd04 Rollback Capability"}),": Easy to revert changes if issues arise"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udcdd Change Tracking"}),": Full audit trail of who changed what and when"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83e\uddea Testing Environment"}),": Validate changes before users see them"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udc65 Team Collaboration"}),": Multiple developers can work safely in parallel"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"your-first-data-model",children:"Your First Data Model"}),"\n",(0,r.jsxs)(n.p,{children:["Now that you understand the development workflow, let's enhance the ",(0,r.jsx)(n.code,{children:"orders"})," cube with business-relevant metrics. ",(0,r.jsx)(n.strong,{children:"Remember to enter Development Mode now!"})]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-add-revenue-metrics",children:"Exercise: Add Revenue Metrics"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Navigate to the Data Model page in your Cube workspace"}),"\n",(0,r.jsxs)(n.li,{children:["Select the ",(0,r.jsx)(n.code,{children:"model/cubes/orders.yml"})," file to see the code for that cube"]}),"\n",(0,r.jsxs)(n.li,{children:["Add these two measures to the ",(0,r.jsx)(n.code,{children:"measures:"})," block.  Indentation is important in yaml so make sure they align with the ",(0,r.jsx)(n.code,{children:"count"})," measure:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/orders.yml" {7-17}',children:'...\n\n    measures:\n      - name: count\n        type: count\n\n      - name: total_revenue\n        sql: o_totalprice\n        type: sum\n        format: currency\n        description: "Total revenue from all orders"\n      \n      - name: average_order_value\n        sql: "{CUBE.total_revenue} / {CUBE.count}"\n        type: number\n        format: currency\n        description: "Average revenue per order"\n\n    dimensions:\n      - name: id\n        sql: o_orderkey\n        type: number\n        primary_key: true\n'})}),"\n",(0,r.jsx)(n.h3,{id:"test-your-model-in-the-playground",children:"Test Your Model in the Playground"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Save"})," the cube definition in your Cube IDE"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Navigate to Playground"})," (left sidebar)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build and test each query"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Revenue by month"}),": Add ",(0,r.jsx)(n.code,{children:"orders.total_revenue"})," measure + ",(0,r.jsx)(n.code,{children:"orders.order_date"})," dimension"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Order value by priority"}),": Add ",(0,r.jsx)(n.code,{children:"orders.average_order_value"})," measure + ",(0,r.jsx)(n.code,{children:"orders.priority"})," dimension"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Order count by status"}),": Add ",(0,r.jsx)(n.code,{children:"orders.count"})," measure + ",(0,r.jsx)(n.code,{children:"orders.status"})," dimension"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'Click "Run Query"'})," to execute"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"View the chart"})," to visualize your results"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Check the SQL API and Generated SQL tabs"})," to see how Cube rewrites your semantic query into optimized SQL"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Learning"}),": Notice how the Generated SQL is much more complex than the simple semantic query you built in the interface. Cube lets you define the fields once and show the end users only the handles all the complexity for you!"]}),"\n",(0,r.jsx)(n.h3,{id:"the-power-of-reusability",children:"The Power of Reusability"}),"\n",(0,r.jsxs)(n.p,{children:["Notice how ",(0,r.jsx)(n.code,{children:"average_order_value"})," reuses the ",(0,r.jsx)(n.code,{children:"total_revenue"})," and ",(0,r.jsx)(n.code,{children:"count"})," measures? This is the DRY principle in action - change the revenue calculation once, and all dependent metrics update automatically."]}),"\n",(0,r.jsx)(n.h2,{id:"joins-and-relationships",children:"Joins and Relationships"}),"\n",(0,r.jsxs)(n.p,{children:["Cube automatically handles join traversals when you query fields from different cubes. These joins in the ",(0,r.jsx)(n.code,{children:"orders"})," cube create a relationship from ",(0,r.jsx)(n.code,{children:"orders"})," to ",(0,r.jsx)(n.code,{children:"customers"})," and from ",(0,r.jsx)(n.code,{children:"orders"})," to ",(0,r.jsx)(n.code,{children:"line_items"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'    joins:\n      - name: customers\n        relationship: many_to_one\n        sql: "{CUBE}.o_custkey = {customers}.c_custkey"\n\n      - name: line_items\n        relationship: one_to_many\n        sql: "{CUBE}.o_orderkey = {line_items}.l_orderkey"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"What this enables:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-cube queries"}),": Query ",(0,r.jsx)(n.code,{children:"orders.count"})," grouped by ",(0,r.jsx)(n.code,{children:"line_items.part_key"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Aggregate rollups"}),": Sum line item values up to the order level"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complex analytics"}),": Compare order totals vs. sum of line item prices"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Automatic JOIN logic"}),": Cube handles all the SQL complexity behind the scenes"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"one_to_many"})," direction tells Cube that one order contains many line items, which prevents fan-out issues when aggregating order-level measures."]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Start simple"})," - Begin with basic counts and sums - building blocks for your analytics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use descriptive names"})," - ",(0,r.jsx)(n.code,{children:"total_revenue"})," not ",(0,r.jsx)(n.code,{children:"tr"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add descriptions"})," - Help users and agents understand metrics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use titles"})," - Provide user-friendly titles for measures and dimensions as needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Format appropriately"})," - Currency, percentages, etc."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Think reusability"}),' - Build metrics that are additive and compose well - minimize use of "average" or "count_distinct" unless necessary']}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Use a ",(0,r.jsx)(n.strong,{children:"sum measure"})," and a ",(0,r.jsx)(n.strong,{children:"count measure"})," instead of an average. Cube can cache the additive components and compute the final average on the fly."]})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Instead of ",(0,r.jsx)(n.code,{children:"count_distinct"}),", where possible, use the ",(0,r.jsx)(n.code,{children:"count"})," measure in a joined cube where that dimension is the primary key. Cube will automatically deduplicate the results, and the additive ",(0,r.jsx)(n.code,{children:"count"})," measure can be used efficiently by pre-aggregations (we'll cover this more in the caching section)."]})}),"\n",(0,r.jsx)(n.h2,{id:"common-cube-parameters",children:"Common Cube Parameters"}),"\n",(0,r.jsx)(n.p,{children:"Beyond measures and dimensions, Cube offers several parameters to enhance your data model:"}),"\n",(0,r.jsx)(n.h3,{id:"visibility-control",children:"Visibility Control"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"public: false"})," - Hides the object from end users by not exposing it through the APIs - it's only visible in the playground."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'cubes:\n  - name: base_cube\n    sql_table: base_table \n    public: false  # Hide from end users\n    description: "Internal cube for low-level calculations only"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Building blocks"})," - Hide bridge or base cubes, or intermediate calculations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Expose views only"})," - Cubes are usually used as building blocks, with only views exposed to end users"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dynamic Security"})," - Use with a dynamic function to control visibility based on user's security context"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Gradual rollout"})," - Keep new objects hidden until ready"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"metadata-for-discovery",children:"Metadata for Discovery"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'cubes:\n  - name: orders\n    sql_table: orders\n    title: "Customer Orders"\n    description: "All customer orders with order-level metrics"\n    meta:\n      category: "Sales"\n      owner: "annie@tpch.com"\n      sla: "Updated hourly"\n      tags: ["core", "financial"]\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Business value:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Discoverability"})," - Help users find the right data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Documentation"})," - Self-documenting data models"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Governance"})," - Track ownership and update frequency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AI/LLM Integration"})," - Metadata helps AI tools understand your data"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"sql-flexibility",children:"SQL Flexibility"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"cubes:\n  - name: complex_metrics\n    sql: >\n      SELECT * FROM (\n        SELECT \n          customer_id,\n          order_date,\n          RANK() OVER (PARTITION BY customer_id ORDER BY order_date) as order_rank\n        FROM orders\n      ) ranked_orders\n    # Use a subquery instead of a table\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"When to use:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Window functions"})," - Pre-calculate rankings or running totals"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complex CTEs"})," - Embed business logic in the source query"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance optimization"})," - Push calculations to the database"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"refresh-keys-for-cache-invalidation",children:"Refresh Keys for Cache Invalidation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"cubes:\n  - name: orders\n    sql_table: orders\n    refresh_key:\n      every: 1 hour  # Check for updates hourly\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fresh data"})," - Control how often Cube checks for changes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance"})," - Balance freshness with query performance"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost optimization"})," - Reduce unnecessary database queries"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"data-source-routing",children:"Data Source Routing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"cubes:\n  - name: historical_orders\n    data_source: warehouse  # Route to different database\n    sql_table: orders_archive\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-database setups"})," - Route queries to different data sources or db schemas based on the user security context - this is common in multi-tenant applications"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Hybrid architectures"})," - Mix real-time and warehouse data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost optimization"})," - Route heavy queries to read replicas"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Data locality"})," - Keep regional data in regional databases"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsx)(n.h3,{id:"exercise-1-complete-the-missing-join",children:"Exercise 1: Complete the Missing Join"}),"\n",(0,r.jsxs)(n.p,{children:["In the starter data model, we've intentionally left out one join. Add the missing relationship between ",(0,r.jsx)(n.code,{children:"orders"})," and ",(0,r.jsx)(n.code,{children:"line_items"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/orders.yml" {8-10}',children:'...\n\n    joins:\n      - name: customers\n        relationship: many_to_one\n        sql: "{CUBE}.o_custkey = {customers}.c_custkey"\n\n      - name: line_items\n        relationship: one_to_many\n        sql: "{CUBE}.o_orderkey = {line_items}.l_orderkey"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Understanding the relationship:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Direction"}),": ",(0,r.jsx)(n.code,{children:"one_to_many"})," means one order contains many line items"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Business logic"}),": This allows you to analyze orders by their component parts and run subqueries against line items"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fan-out prevention"}),": Cube knows to handle aggregation correctly across this relationship"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-2-add-subquery-dimensions",children:"Exercise 2: Add Subquery Dimensions"}),"\n",(0,r.jsxs)(n.p,{children:["Now let's use that new relationship to create a subquery. Subqueries are useful for cases like aggregating measures from a lower grain to a cube at a higher grain.  Subqueries are always dimensions and they are generally used to reference a measure in a related cube. Add this dimension to your ",(0,r.jsx)(n.code,{children:"orders"})," cube:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/orders.yml" {7-11}',children:'...\n\n      - name: comment\n        sql: o_comment\n        type: string\n      \n      - name: items_in_order\n        sql: "{line_items.count}"\n        type: number\n        description: "Number of line items in this order"\n        sub_query: true\n\n    joins:\n      - name: customers\n        relationship: many_to_one\n        sql: "{CUBE}.o_custkey = {customers}.c_custkey"\n\n...\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test in Playground"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Save"})," the updated orders.yml"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query"}),": ",(0,r.jsx)(n.code,{children:"orders.count"})," grouped by ",(0,r.jsx)(n.code,{children:"orders.items_in_order"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Visualize"})," the distribution of order complexity (hint: use the ",(0,r.jsx)(n.code,{children:"Order"})," button to change the sort fields and direction)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generated SQL tab"}),": See how Cube handles the subquery in the dimension"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-3-business-logic-with-binning",children:"Exercise 3: Business Logic with Binning"}),"\n",(0,r.jsxs)(n.p,{children:["Create business-friendly categories by adding binning dimensions.  Instead of defining these over and over again for every BI tool and database connection, we can define them once in Cube and reuse them everywhere.  Add this dimension to your ",(0,r.jsx)(n.code,{children:"orders"})," cube:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/orders.yml" {9-18}',children:"...\n\n      - name: items_in_order\n        sql: \"{line_items.count}\"\n        type: number\n        description: \"Number of line items in this order\"\n        sub_query: true\n\n      - name: order_size_category\n        sql: >\n          CASE \n            WHEN {CUBE}.o_totalprice < 50000 THEN 'Small'\n            WHEN {CUBE}.o_totalprice < 100000 THEN 'Medium'\n            WHEN {CUBE}.o_totalprice < 200000 THEN 'Large'\n            ELSE 'Enterprise'\n          END\n        type: string\n        description: \"Order size categories for business analysis\"\n\n    joins:\n      - name: customers\n        relationship: many_to_one\n        sql: \"{CUBE}.o_custkey = {customers}.c_custkey\"\n\n...\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test in Playground"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Save"})," and ",(0,r.jsx)(n.strong,{children:"query"}),": ",(0,r.jsx)(n.code,{children:"orders.total_revenue"})," by ",(0,r.jsx)(n.code,{children:"orders.order_size_category"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use a bar chart"})," to visualize revenue distribution - expand the ",(0,r.jsx)(n.strong,{children:"Chart"})," section of the playground and click the ",(0,r.jsx)(n.strong,{children:"Bar"})," chart type"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generated SQL"}),": Notice the CASE statement integration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Business insight"}),": Which order sizes generate the most revenue?"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-4-multi-level-measure-dependencies",children:"Exercise 4: Multi-Level Measure Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["Create a business-critical metric using subqueries and measure dependencies. Let's build ",(0,r.jsx)(n.strong,{children:"Average Customer Value (ACV)"})," in the customers cube:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 1: Add a subquery dimension to customers.yml"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/customers.yml" {7-12}',children:'...\n\n      - name: comment\n        sql: c_comment\n        type: string\n\n      - name: lifetime_value\n        sql: "{orders.total_revenue}"\n        type: number\n        format: currency\n        description: "Total revenue from all orders for this customer"\n        sub_query: true\n\n    joins:\n      - name: customer_nations\n        relationship: many_to_one\n        sql: "{CUBE}.c_nationkey = {customer_nations}.n_nationkey"\n\n...\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 2: Add the ACV measure to customers.yml"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/customers.yml" {7-11}',children:'...\n\n    measures:\n      - name: count\n        type: count\n        \n      - name: average_customer_value\n        sql: "{CUBE.lifetime_value}"\n        type: avg\n        format: currency\n        description: "ACV - Average revenue per customer across all customers"\n\n    dimensions:\n      - name: customer_key\n        sql: c_custkey\n        type: number\n        primary_key: true\n\n...\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test in Playground"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Save"})," the updated customers.yml"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Query"}),": ",(0,r.jsx)(n.code,{children:"customers.average_customer_value"})," grouped by ",(0,r.jsx)(n.code,{children:"customers.segment"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Generated SQL tab"}),": Notice how Cube:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Creates a subquery to calculate each customer's lifetime value"}),"\n",(0,r.jsx)(n.li,{children:"Then averages those totals across all customers"}),"\n",(0,r.jsx)(n.li,{children:"Handles the complex multi-level aggregation automatically"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Business insight"}),": Which customer segments have the highest ACV?"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"understanding-relationships--fan-outs",children:"Understanding Relationships & Fan-Outs"}),"\n",(0,r.jsx)(n.h3,{id:"why-relationship-direction-matters",children:"Why Relationship Direction Matters"}),"\n",(0,r.jsxs)(n.p,{children:["Proper join relationships prevent ",(0,r.jsx)(n.strong,{children:"fan-outs"})," and ",(0,r.jsx)(n.strong,{children:"chasm traps"}),".  Let's use the ",(0,r.jsx)(n.code,{children:"orders"})," cube as an example:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# \u2705 Correct - prevents fan-out\njoins:\n  - name: customers\n    relationship: many_to_one  # Many orders belong to one customer\n    sql: "{CUBE}.customer_key = {customers}.customer_key"\n\n# \u2705 Correct - one-to-many relationship  \njoins:\n  - name: line_items\n    relationship: one_to_many   # One order has many line items\n    sql: "{CUBE}.order_key = {line_items}.order_key"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"fan-out-prevention",children:"Fan-Out Prevention"}),"\n",(0,r.jsx)(n.p,{children:"Without proper relationships, queries can produce incorrect results:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Without proper joins, this query might double-count\nSELECT \n  COUNT(*) as order_count,\n  SUM(line_item_revenue) as total_revenue\nFROM orders o\nJOIN line_items li ON o.order_key = li.order_key\n-- Result: order_count is inflated by number of line items per order!\n"})}),"\n",(0,r.jsx)(n.p,{children:"Cube's relationship declarations automatically handle this by:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Using appropriate ",(0,r.jsx)(n.code,{children:"JOIN"})," vs ",(0,r.jsx)(n.code,{children:"LEFT JOIN"})]}),"\n",(0,r.jsxs)(n.li,{children:["Adding ",(0,r.jsx)(n.code,{children:"DISTINCT"})," where necessary"]}),"\n",(0,r.jsx)(n.li,{children:"Optimizing subqueries to prevent multiplicative effects"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"the-power-of-extends",children:"The Power of Extends"}),"\n",(0,r.jsx)(n.h3,{id:"why-our-model-uses-extends",children:"Why Our Model Uses Extends"}),"\n",(0,r.jsxs)(n.p,{children:["In the TPC-H data model, you'll notice patterns like ",(0,r.jsx)(n.code,{children:"customer_nations"})," and ",(0,r.jsx)(n.code,{children:"supplier_nations"}),". These use Cube's ",(0,r.jsx)(n.strong,{children:"extends"})," feature:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/nations.yml"',children:"cubes:\n  - name: nations\n    sql_table: nation\n    # Base nation cube with all dimensions\n    \n  - name: customer_nations\n    extends: nations\n    # Inherits all measures and dimensions from nations\n    \n  - name: supplier_nations  \n    extends: nations\n    # Another extension of the same base cube\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Why is this powerful?"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Avoid Ambiguous Joins"})," - When both customers and suppliers connect to nations, Cube needs to know which path to take. Extended cubes make this explicit."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Maintain DRY Principle"})," - Define nation dimensions once, reuse everywhere. Change the definition in one place, all extensions update automatically."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Enable Complex Analytics"})," - Query customers by their nation AND suppliers by their nation in the same query without confusion."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"date-tables-a-common-use-case-for-extends",children:"Date Tables: A Common Use Case for Extends"}),"\n",(0,r.jsx)(n.p,{children:"Extends really shine with date dimensions. Instead of maintaining separate date logic for each timestamp:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/cubes/dates.yml"',children:"cubes:\n  - name: dates\n    sql_table: date_dimension\n    dimensions:\n      - name: date\n        sql: date_key\n        type: time\n      - name: fiscal_quarter\n        sql: fiscal_quarter\n        type: string\n      - name: holiday_flag\n        sql: is_holiday\n        type: boolean\n        \n  - name: order_dates\n    extends: dates\n    # Full date dimension capabilities for order dates\n    \n  - name: ship_dates\n    extends: dates  \n    # Same capabilities for ship dates\n    \n  - name: return_dates\n    extends: dates\n    # And return dates\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now each date field has the full power of your date dimension - fiscal periods, holidays, weekdays - without duplicating code!"}),"\n",(0,r.jsx)(n.h3,{id:"custom-extensions",children:"Custom Extensions"}),"\n",(0,r.jsx)(n.p,{children:"You can also selectively override or add to extended cubes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'cubes:\n  - name: ship_dates\n    extends: dates\n    dimensions:\n      - name: days_to_ship\n        sql: "DATEDIFF({orders.order_date}, {CUBE.date})"\n        type: number\n        description: "Days between order and shipment"\n'})}),"\n",(0,r.jsx)(n.h1,{id:"views",children:"Views"}),"\n",(0,r.jsx)(n.p,{children:"Views sit on top of the data graph of cubes and create a facade of your whole data model with which data consumers can interact. They are useful for defining metrics, managing governance and data access, and controlling ambiguous join paths."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Cubes and Views",src:s(5122).A+"",width:"1642",height:"1014"})}),"\n",(0,r.jsxs)(n.p,{children:["Views do ",(0,r.jsx)(n.strong,{children:"not"})," define their own members.  Instead they reference cubes by specific join paths and include their members."]}),"\n",(0,r.jsx)(n.p,{children:"You simply define a view that includes all the measures and related dimensions you want to expose, and optionally a folder structure for organizing the fields in tools like Tableau, Power BI, and Excel. The end user can then query this view directly as a single data source through any Cube API."}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-sales-view",children:"Creating a Sales View"}),"\n",(0,r.jsxs)(n.p,{children:["To create a view, it's a best practice define it in a separate YAML file. ",(0,r.jsx)(n.strong,{children:"Important"}),": Generally you'll use the lowest granularity cube with the measures you want in the view - typically one tied to a fact table as your base. In our case, that's ",(0,r.jsx)(n.code,{children:"line_items"})," since it contains the actual sales transactions:"]}),"\n",(0,r.jsxs)(n.p,{children:["Hover over the ",(0,r.jsx)(n.code,{children:"/model/views"})," directory in the Cube Cloud IDE and click the ",(0,r.jsx)(n.strong,{children:"..."}),"* menu, then the ",(0,r.jsx)(n.strong,{children:"New File"})," button. Name the file ",(0,r.jsx)(n.code,{children:"sales.yml"})," and add the following content:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="model/views/sales.yml"',children:'views:\n  - name: sales\n    description: "Sales analytics view with line items as base grain"\n    \n    cubes:\n      # Base cube - line items (lowest granularity)\n      - join_path: line_items\n        includes:\n          - quantity\n          - extended_price\n          - discount\n          - tax\n          - return_flag\n          - line_status\n          - ship_date\n          - ship_mode\n          - total_quantity\n          - total_sales_amount\n          - total_discount\n          - discount_rate\n          \n      # Product information\n      - join_path: line_items.parts\n        prefix: true\n        includes:\n          - name\n          - brand\n          - type\n          - manufacturer\n          - size\n          - container\n          - retail_price\n          \n      # Supplier information  \n      - join_path: line_items.suppliers\n        prefix: true\n        includes:\n          - name\n          - account_balance\n        excludes:\n          - phone\n          - address\n          - comment\n\n      # Order information\n      - join_path: line_items.orders\n        prefix: true\n        includes:\n          - order_date\n          - priority\n          - status\n          - order_size_category\n          - average_order_value\n          - count\n          \n      # Customer information via orders\n      - join_path: line_items.orders.customers\n        prefix: true\n        includes:\n          - name\n          - segment\n          - account_balance\n        excludes:\n          - phone\n          - address\n          - comment\n          \n      # Geographic data\n      - join_path: line_items.orders.customers.customer_nations\n        includes:\n          - name: name\n            alias: nation\n            \n      - join_path: line_items.orders.customers.customer_nations.customer_regions\n        includes:\n          - name: name\n            alias: region\n          - region_key\n'})}),"\n",(0,r.jsx)(n.h2,{id:"what-this-enables",children:"What This Enables"}),"\n",(0,r.jsx)(n.p,{children:"With this view, end users can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analyze at the transaction level"}),": Every row represents an actual line item sale"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access key business metrics"}),": Total sales amount (with discounts applied), quantity sold, discount impact"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Access related data seamlessly"}),": Product, customer, supplier, and geographic data in one query"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use business-friendly field names"}),": Fields like ",(0,r.jsx)(n.code,{children:"customer_name"}),", ",(0,r.jsx)(n.code,{children:"product_brand"}),", ",(0,r.jsx)(n.code,{children:"nation"}),", ",(0,r.jsx)(n.code,{children:"region"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Calculate accurate aggregations"}),": Revenue, quantity, and counts roll up correctly from line item grain"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Avoid grain mismatches"}),": No mixing of order-level and line-level metrics"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-business-metrics-in-the-view",children:"Key Business Metrics in the View"}),"\n",(0,r.jsx)(n.h3,{id:"line-item-measures",children:"Line Item Measures"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"total_sales_amount"})}),": Net revenue after discounts ",(0,r.jsx)(n.code,{children:"(extended_price * (1 - discount))"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"total_quantity"})}),": Units sold across all transactions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"total_discount"})}),": Total discount amount in dollars ",(0,r.jsx)(n.code,{children:"(discount_rate * extended_price)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"discount_rate"})}),": Effective discount rate as percentage of total sales ",(0,r.jsx)(n.code,{children:"(total_discount / total_sales_amount)"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"count"})}),": Number of line items (transaction volume)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"order-measures",children:"Order Measures"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"average_order_value"})}),": Average revenue per order calculated as ",(0,r.jsx)(n.code,{children:"total_revenue / count"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"count"})}),": Number of orders"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"view-design-principles",children:"View Design Principles"}),"\n",(0,r.jsx)(n.h3,{id:"correct-granularity",children:"Correct Granularity"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Base"}),": ",(0,r.jsx)(n.code,{children:"line_items"})," - Lowest grain (actual sales transactions)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Why not orders?"})," - Orders are aggregated line items; line items show what was actually sold.  Orders have multiple line items with differnt parts and suppliers."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Aggregation direction"}),": Generally aggregate UP from lower to higher levels, unless your lower grain has no dimensions (or joins to dimensions) in your view"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"join-path-strategy",children:"Join Path Strategy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"line_items"})," - Base transaction data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"line_items.parts"})," - What products were sold"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"line_items.suppliers"})," - Who supplied the products"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"line_items.orders.customers"})," - Who bought them (traverse through orders)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"line_items.orders.customers.customer_nations"})," - Geographic context"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"field-control-best-practices",children:"Field Control Best Practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"includes"}),": Only fields needed for analysis"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"excludes"}),": Remove sensitive data (phone, address, comments)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"prefix"}),": Prevent naming conflicts (",(0,r.jsx)(n.code,{children:"customer_name"})," vs ",(0,r.jsx)(n.code,{children:"product_name"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"alias"}),": Create intuitive names (",(0,r.jsx)(n.code,{children:"nation"})," instead of generic ",(0,r.jsx)(n.code,{children:"name"}),")"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"benefits-for-end-users",children:"Benefits for End Users"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Correct Analysis"}),": Aggregations work properly at line item grain"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rich Context"}),": Product, customer, supplier, and geography in one place"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clean Schema"}),": Only relevant, business-friendly fields"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Accurate Metrics"}),": Revenue and quantity calculations are precise"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"complete-model-files",children:"Complete Model Files"}),"\n",(0,r.jsx)(n.h3,{id:"-starter-files",children:"\ud83d\udcc1 Starter Files"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:"static/cube-models/starter/"})]}),"\n",(0,r.jsx)(n.p,{children:"Contains:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Basic cubes with dimensions and count measures"}),"\n",(0,r.jsx)(n.li,{children:"Most joins (missing one for exercise)"}),"\n",(0,r.jsx)(n.li,{children:"Foundation for building upon"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-data-modeling-complete",children:"\ud83d\udcc1 Data Modeling Complete"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Location"}),": ",(0,r.jsx)(n.code,{children:"static/cube-models/data-modeling/"})]}),"\n",(0,r.jsx)(n.p,{children:"Contains:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All revenue measures"}),"\n",(0,r.jsx)(n.li,{children:"Subquery dimensions"}),"\n",(0,r.jsx)(n.li,{children:"Binning dimensions"}),"\n",(0,r.jsx)(n.li,{children:"Multi-level measure dependencies"}),"\n",(0,r.jsx)(n.li,{children:"Complete join relationships"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sales View"})," - Denormalized cube perfect for dashboards and reporting"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deploying-your-sales-view-to-production",children:"Deploying Your Sales View to Production"}),"\n",(0,r.jsx)(n.p,{children:"Now that you've built a comprehensive sales view with all the business metrics, it's time to deploy your changes to production so they can be used by applications and end users."}),"\n",(0,r.jsx)(n.h3,{id:"final-exercise-commit-your-changes",children:"Final Exercise: Commit your Changes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 1: Review Your Changes"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ensure you're in Development Mode"}),' - Look for the "Dev Mode" indicator']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test your sales view"})," one final time in the Playground:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Query ",(0,r.jsx)(n.code,{children:"sales.total_sales_amount"})," by ",(0,r.jsx)(n.code,{children:"sales.region"})]}),"\n",(0,r.jsxs)(n.li,{children:["Query ",(0,r.jsx)(n.code,{children:"sales.parts_brand"})," with ",(0,r.jsx)(n.code,{children:"sales.total_quantity"})]}),"\n",(0,r.jsx)(n.li,{children:"Verify all field names and calculations are correct"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 2: Commit Your Development Branch"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Navigate to the Data Model page"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review all your changes"})," - You should see modified files and changes highlighted on the ",(0,r.jsx)(n.strong,{children:"Changes"})," diff tab"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Click Commit & Sync"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Add a descriptive commit message"}),":","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Add comprehensive sales view with line item metrics\n\n- Created sales view with line_items as base grain\n- Included product, customer, supplier, and geographic dimensions\n- Added revenue, quantity, and discount measures\n- Configured proper field prefixes and aliases for clarity\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:'Click "Commit & Sync"'})," to save your changes to the development branch"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"We'll not merge to production just yet, since there's more work to do."}),"\n",(0,r.jsx)(n.h3,{id:"what-youve-accomplished",children:"What You've Accomplished"}),"\n",(0,r.jsx)(n.p,{children:"Congratulations! You've successfully:"}),"\n",(0,r.jsxs)(n.p,{children:["\u2705 ",(0,r.jsx)(n.strong,{children:"Learned Cube's development workflow"})," - Safe, isolated development with Git integration",(0,r.jsx)(n.br,{}),"\n","\u2705 ",(0,r.jsx)(n.strong,{children:"Enhanced the orders cube"})," - Added revenue metrics and business logic",(0,r.jsx)(n.br,{}),"\n","\u2705 ",(0,r.jsx)(n.strong,{children:"Built complex relationships"})," - Subqueries, joins, and measure dependencies",(0,r.jsx)(n.br,{}),"\n","\u2705 ",(0,r.jsx)(n.strong,{children:"Created a comprehensive sales view"})," - Line item grain with rich dimensional context",(0,r.jsx)(n.br,{}),"\n","\u2705 ",(0,r.jsx)(n.strong,{children:"Deployed to production"})," - Your changes are now live and ready for applications"]}),"\n",(0,r.jsx)(n.h3,{id:"business-friendly-data-model",children:"Business-Friendly Data Model"}),"\n",(0,r.jsx)(n.p,{children:"Your sales view now provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83c\udfaf Correct granularity"}),": Line item level for accurate transaction analysis"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udcca Key business metrics"}),": Revenue, quantity, discounts with proper calculations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83c\udf10 Rich context"}),": Product, customer, supplier, and geographic dimensions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udd17 Clean relationships"}),": Proper join paths preventing fan-out issues"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\ud83d\udcdd Business-friendly naming"}),": Intuitive field names and aliases"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This data model is well on its way to power dashboards, reports, and applications with consistent, reliable business metrics."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Next"}),": ",(0,r.jsx)(n.a,{href:"/docs/access-control",children:"Access Control \u2192"})," - Learn how to secure your data with row-level security."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},3271:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/merge-modal-17caacbac9c7eb0b1ce5e73addebe487.png"},3903:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/dev-mode-entry-a56e3f419918dd0cc83ebb5c9bfcf902.png"},4543:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/commit-button-e66957477b1a84fa2dec82c9de3aabc2.png"},5122:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/cubes_views-e26be8af1948a6c005bd2f9f6b0e2ac1.png"},5868:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/playground-c11179bf0f5ec9121824853e96e8d65d.png"},7201:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/visual_model-02cc4d20d5382375d5ec4c2aa1a56813.png"}}]);